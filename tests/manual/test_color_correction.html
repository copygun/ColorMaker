<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒ‰ìƒ ë³´ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 1000px;
            margin: 0 auto;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .btn {
            background: #667eea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #5a67d8;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 6px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .pass { color: green; font-weight: bold; }
        .fail { color: red; font-weight: bold; }
        .color-box {
            display: inline-block;
            width: 60px;
            height: 60px;
            border: 2px solid #333;
            border-radius: 4px;
            margin: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª ìƒ‰ìƒ ë³´ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>        <div class="test-section">
            <h2>1. ë³´ì • ì—”ì§„ í…ŒìŠ¤íŠ¸</h2>
            <button class="btn" onclick="testCorrectionEngine()">ë³´ì • ì—”ì§„ í…ŒìŠ¤íŠ¸</button>
            <div id="engine-result" class="result"></div>
        </div>

        <div class="test-section">
            <h2>2. ìƒ‰ì°¨ ë¶„ì„ í…ŒìŠ¤íŠ¸</h2>
            <p>ëª©í‘œ ìƒ‰ìƒ: L=50, a=20, b=30 (ì£¼í™©ìƒ‰)</p>
            <p>ì‹¤ì œ ìƒ‰ìƒ: L=48, a=18, b=28 (ì•½ê°„ ì–´ë‘ìš´ ì£¼í™©ìƒ‰)</p>
            <button class="btn" onclick="testColorAnalysis()">ìƒ‰ì°¨ ë¶„ì„</button>
            <div id="analysis-result" class="result"></div>
        </div>

        <div class="test-section">
            <h2>3. ë³´ì • ê°€ëŠ¥ì„± í…ŒìŠ¤íŠ¸</h2>
            <button class="btn" onclick="testFeasibility()">ë³´ì • ê°€ëŠ¥ì„± í‰ê°€</button>
            <div id="feasibility-result" class="result"></div>
        </div>

        <div class="test-section">
            <h2>4. íŠ¹ìˆ˜ ì‰í¬ ì¶”ì²œ í…ŒìŠ¤íŠ¸</h2>
            <button class="btn" onclick="testSpecialInks()">íŠ¹ìˆ˜ ì‰í¬ ì¶”ì²œ</button>
            <div id="special-result" class="result"></div>
        </div>

        <div class="test-section">
            <h2>5. React ì•±ì—ì„œ í™•ì¸</h2>
            <button class="btn" onclick="window.open('http://localhost:3000', '_blank')">ì•± ì—´ê¸°</button>
            <p>ì•±ì—ì„œ ë‹¤ìŒì„ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”:</p>
            <ol>
                <li>ë ˆì‹œí”¼ ê³„ì‚° ì‹¤í–‰</li>
                <li>"ğŸ¯ ìƒ‰ìƒ ë³´ì •" ë²„íŠ¼ í´ë¦­</li>
                <li>ì‹¤ì œ ì¸ì‡„ ìƒ‰ìƒ ì…ë ¥</li>
                <li>ìƒ‰ì°¨ ë¶„ì„ ë° ë³´ì • ì œì•ˆ í™•ì¸</li>
            </ol>
        </div>
    </div>    <script type="module">
        window.testCorrectionEngine = async function() {
            const resultEl = document.getElementById('engine-result');
            try {
                const { default: CorrectionEngine } = await import('./core/correctionEngine.js');
                const engine = new CorrectionEngine();
                
                resultEl.innerHTML = '<span class="pass">âœ“ ë³´ì • ì—”ì§„ ë¡œë“œ ì„±ê³µ</span>\n';
                resultEl.innerHTML += 'ì—”ì§„ ì„¤ì •:\n';
                resultEl.innerHTML += `- ìµœëŒ€ ë°˜ë³µ: ${engine.maxIterations}\n`;
                resultEl.innerHTML += `- ëª©í‘œ Delta E: ${engine.targetDeltaE}\n`;
                resultEl.innerHTML += `- ì´ë ¥ ê´€ë¦¬: í™œì„±í™”`;
            } catch (error) {
                resultEl.innerHTML = `<span class="fail">âœ— ë¡œë“œ ì‹¤íŒ¨: ${error.message}</span>`;
            }
        };

        window.testColorAnalysis = async function() {
            const resultEl = document.getElementById('analysis-result');
            try {
                const { default: CorrectionEngine } = await import('./core/correctionEngine.js');
                const { inkDB } = await import('./core/inkDatabase.js');
                
                const engine = new CorrectionEngine();
                const targetLab = { L: 50, a: 20, b: 30 };
                const actualLab = { L: 48, a: 18, b: 28 };
                const currentRecipe = [
                    { inkId: 'magenta', ratio: 30, concentration: 100 },
                    { inkId: 'yellow', ratio: 40, concentration: 100 }
                ];
                
                const analysis = engine.analyzeCorrection(
                    targetLab,
                    actualLab,
                    currentRecipe,
                    inkDB.getAllInks()
                );
                
                resultEl.innerHTML = '<span class="pass">âœ“ ë¶„ì„ ì™„ë£Œ</span>\n\n';
                resultEl.innerHTML += `Delta E 2000: ${analysis.deltaE.toFixed(2)}\n`;
                resultEl.innerHTML += `ìƒ‰ìƒ ì°¨ì´:\n`;
                resultEl.innerHTML += `- Î”L: ${analysis.colorDifference.dL.toFixed(2)}\n`;
                resultEl.innerHTML += `- Î”a: ${analysis.colorDifference.da.toFixed(2)}\n`;
                resultEl.innerHTML += `- Î”b: ${analysis.colorDifference.db.toFixed(2)}\n\n`;
                resultEl.innerHTML += `ë³´ì • ë°©í–¥:\n`;
                analysis.correctionDirection.corrections.forEach(c => {
                    resultEl.innerHTML += `- ${c.type}: ${c.value} (${c.amount.toFixed(2)})\n`;
                });
            } catch (error) {
                resultEl.innerHTML = `<span class="fail">âœ— ë¶„ì„ ì‹¤íŒ¨: ${error.message}</span>`;
            }
        };        window.testFeasibility = async function() {
            const resultEl = document.getElementById('feasibility-result');
            try {
                const { default: CorrectionEngine } = await import('./core/correctionEngine.js');
                const { inkDB } = await import('./core/inkDatabase.js');
                
                const engine = new CorrectionEngine();
                
                // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 1: ë³´ì • ê°€ëŠ¥í•œ ê²½ìš°
                const test1 = engine.analyzeCorrection(
                    { L: 50, a: 20, b: 30 },
                    { L: 48, a: 18, b: 28 },
                    [{ inkId: 'magenta', ratio: 30 }, { inkId: 'yellow', ratio: 40 }],
                    inkDB.getAllInks()
                );
                
                // í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ 2: ìƒ‰ì°¨ê°€ í° ê²½ìš°
                const test2 = engine.analyzeCorrection(
                    { L: 50, a: 20, b: 30 },
                    { L: 30, a: -10, b: 0 },
                    [{ inkId: 'cyan', ratio: 100 }],
                    inkDB.getAllInks()
                );
                
                resultEl.innerHTML = '<span class="pass">âœ“ í‰ê°€ ì™„ë£Œ</span>\n\n';
                resultEl.innerHTML += 'í…ŒìŠ¤íŠ¸ 1 (ì‘ì€ ìƒ‰ì°¨):\n';
                resultEl.innerHTML += `- ë³´ì • ê°€ëŠ¥: ${test1.feasibility.isPossible ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}\n`;
                resultEl.innerHTML += `- ì‹ ë¢°ë„: ${(test1.feasibility.confidence * 100).toFixed(0)}%\n`;
                if (test1.feasibility.correctionInks) {
                    resultEl.innerHTML += `- ì¶”ì²œ ì‰í¬: ${test1.feasibility.correctionInks.length}ê°œ\n`;
                }
                
                resultEl.innerHTML += '\ní…ŒìŠ¤íŠ¸ 2 (í° ìƒ‰ì°¨):\n';
                resultEl.innerHTML += `- ë³´ì • ê°€ëŠ¥: ${test2.feasibility.isPossible ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}\n`;
                resultEl.innerHTML += `- ì´ìœ : ${test2.feasibility.reason}\n`;
                resultEl.innerHTML += `- ì¶”ì²œ: ${test2.feasibility.recommendation}\n`;
            } catch (error) {
                resultEl.innerHTML = `<span class="fail">âœ— í‰ê°€ ì‹¤íŒ¨: ${error.message}</span>`;
            }
        };        window.testSpecialInks = async function() {
            const resultEl = document.getElementById('special-result');
            try {
                const { default: CorrectionEngine } = await import('./core/correctionEngine.js');
                
                const engine = new CorrectionEngine();
                
                // ë‹¤ì–‘í•œ ìƒ‰ì°¨ í…ŒìŠ¤íŠ¸
                const testCases = [
                    { dL: 10, da: 0, db: 0, desc: 'ëª…ë„ë§Œ ë†’ìŒ' },
                    { dL: -10, da: 0, db: 0, desc: 'ëª…ë„ë§Œ ë‚®ìŒ' },
                    { dL: 0, da: 8, db: 0, desc: 'ì ìƒ‰ í•„ìš”' },
                    { dL: 0, da: -8, db: 0, desc: 'ë…¹ìƒ‰ í•„ìš”' },
                    { dL: 0, da: 0, db: 8, desc: 'í™©ìƒ‰ í•„ìš”' },
                    { dL: 0, da: 0, db: -8, desc: 'ì²­ìƒ‰ í•„ìš”' }
                ];
                
                resultEl.innerHTML = '<span class="pass">âœ“ íŠ¹ìˆ˜ ì‰í¬ ì¶”ì²œ í…ŒìŠ¤íŠ¸</span>\n\n';
                
                testCases.forEach(test => {
                    const suggestions = engine.suggestSpecialInks(test);
                    resultEl.innerHTML += `${test.desc}:\n`;
                    if (suggestions.length > 0) {
                        suggestions.forEach(s => {
                            resultEl.innerHTML += `  â€¢ ${s.type}: ${s.reason}\n`;
                        });
                    } else {
                        resultEl.innerHTML += `  â€¢ ì¶”ì²œ ì—†ìŒ\n`;
                    }
                    resultEl.innerHTML += '\n';
                });
            } catch (error) {
                resultEl.innerHTML = `<span class="fail">âœ— í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}</span>`;
            }
        };
    </script>
</body>
</html>